openapi: 3.0.1
info:
  title: "Seanox XMEX - XML-Micro-Exchange"
  version: "1.3.0"
  description: "
XML-Micro-Exchange is a volatile NoSQL stateless micro datasource for the
Internet. It is designed for easy communication and data exchange of
web-applications and for IoT or for other Internet-based modules and
components.<br>
The XML based datasource is volatile and lives through continuous use and
expires through inactivity. They are designed for active and near real-time data
exchange but not as a real-time capable long-term storage.<br>
Compared to a JSON storage, this datasource supports more dynamics, partial data
access, data transformation, and volatile short-term storage.

<h1>API</h1>
The API uses the HTTP.

The URI typically contains a noticeable separator to divide it into context
path and XPath.

For the API only the XPath is relevant.

<pre>
https://xmex.seanox.com/xmex!xpath(-function)<br>
<-------------------------->|<--------------><br>
&#160;       Context Path              XPath<br>
</pre>

In some cases, the XPath syntax may not be supported as a URI by the client or
provider.<br>
In these cases, the XPath can alternatively be used as a query string or
hexadecimal or Base64 encoded.

<pre>
https://xmex.seanox.com/xmex!count(//items[@id<0])<br>
https://xmex.seanox.com/xmex!count(%2F%2Fitems[@id<0])<br>
https://xmex.seanox.com/xmex!0x636F756E74282F2F6974656D735B4069643C305D29<br>
https://xmex.seanox.com/xmex!Base64:Y291bnQoLy9pdGVtc1tAaWQ8MF0p<br>
</pre>

The request supports the following additional headers:

<pre>
Storage                   Storage identifier optional with name of the root element<br>
Accept-Effects            Controls the content of Storage Effects header<br>
</pre>

Also the reponse has additional headers:

<pre>
Connection-Unique          Unique ID created by the API to mark client owner data<br>
Storage                    Storage identifier without the name of the root element<br>
Storage-Revision           Current revision of the storage<br>
Storage-Space              Capacity of the storage (total/used in bytes)<br>
Storage-Last-Modified      Timestamp (RFC822) of the last access<br>
Storage-Expiration         Timestamp (RFC822) when the storage will expire<br>
Storage-Expiration-Time    Idle time in milliseconds until storage expires<br>
Storage-Effects            For PUT/PATCH/DELETE, UUIDs directly affected by the request<br>
Execution-Time             Duration of request processing in milliseconds<br>
Error                      Unique error number from the logging with status 500<br>
Message                    Detailed error message with status 400 / 422
</pre>
<b>
  Notice about response code 404: This always refers to the storage, but never
  to an addressed target in the storage.<br>
  If a target does not exist, requests are responded to with code 204.
</b>
<br><br>
  "
  termsOfService: "https://raw.githubusercontent.com/seanox/xml-micro-exchange-js/master/TERMS%20OF%20SERVICE"
  contact:
    email: "xmex@seanox.com"
  license:
    name: "Apache 2.0"
    url: "http://www.apache.org/licenses/LICENSE-2.0.html"
externalDocs:
  description: Find out more about Seanox XMEX
  url: https://github.com/seanox/xml-micro-exchange-js
servers:
  - url: https://xmex.seanox.com
  - url: http://127.0.0.1:8000
tags:
  - name: "API"
paths:
  /xmex!:
    options:
      tags:
        - API
      parameters:
        - name: Storage
          in: header
          description: "
              Each storage has an identifier. The Storage Identifier is used as
              the filename of the corresponding XML file and must be specified
              with each request so that the datasource uses the correct storage.
              Optionally, the storage identifier can be followed by the name of
              the root element of the XML file separated by a space.<br>
              If the root element is not specified, the default 'data' is used.<br>
              <br>
              <b>Important:</b> To use a storage, the storage identifier and name
              of the root element must match.<br>
              <br>
              <b>Pattern:</b> ^(\\w{1,64})(?:\\s+(\\w+))?$<br>
              <br>
              <b>Example:</b> WEATHER_STATION / WEATHER_STATION station<br>
              <br>
              Special case CORS.<br>
              The request header Storage is normally always required. However,
              it is not required for the CORS preflight-request. Therefore, the
              header has been decalarized as non-optional.
            "
          required: false
          schema:
            type: string
            example: WEATHER_STATION station
      responses:
        200:
          description: "CORS Access-Control preflight request"
        201:
          description: "Storage was newly created"
        204:
          description: "Storage already exists"
        400:
          description: "
              Storage header is invalid, 1 - 64 characters (0-9A-Z_) are expected<br>
              or XPath is missing or malformed
            "
        404:
          description: "Storage does not exist."
        500:
          description: "
              An unexpected error has occurred.<br>
              The response contains the response header with a unique error number.<br>
              A corresponding entry exists in the logging.
            "
        507:
          description: "Storage is full"
  /xmex!{xpath}:
    options:
      tags:
        - API
      parameters:
        - name: Storage
          in: header
          description: "
              Each storage has an identifier. The Storage Identifier is used as
              the filename of the corresponding XML file and must be specified
              with each request so that the datasource uses the correct storage.
              Optionally, the storage identifier can be followed by the name of
              the root element of the XML file separated by a space.<br>
              If the root element is not specified, the default 'data' is used.<br>
              <br>
             <b>Important:</b> To use a storage, the storage identifier and name
              of the root element must match.<br>
              <br>
              <b>Pattern:</b> ^(\\w{1,64})(?:\\s+(\\w+))?$<br>
              <br>
              <b>Example:</b> WEATHER_STATION / WEATHER_STATION station<br>
            "
          required: true
          schema:
            type: string
            example: WEATHER_STATION station
        - name: xpath
          in: path
          description: "
              XPath axis or function.<br>
              Axes always start with a slash, functions do not.<br>
              This is only for the initial distinction from the expression for the interpreter.<br>
              Functions can then also use axes and axes can then also use functions.
              <dir>Example:</dir>
              <pre>
              count(//sensors/*)<br>
              //sensors/nox/data/record[position()>count(//record)-5]
              </pre>
            "
          required: true
          schema:
            type: string
            example: //sensors/nox/data/record
      responses:
        204:
          description: "TODO:"
        400:
          description: "TODO:"
        404:
          description: "Storage does not exist"
        500:
          description: "
              An unexpected error has occurred.<br>
              The response contains the response header with a unique error number.<br>
              A corresponding entry exists in the logging.
            "
    put:
      tags:
        - API
      parameters:
        - name: Storage
          in: header
          description: "
              Each storage has an identifier. The Storage Identifier is used as
              the filename of the corresponding XML file and must be specified
              with each request so that the datasource uses the correct storage.
              Optionally, the storage identifier can be followed by the name of
              the root element of the XML file separated by a space.<br>
              If the root element is not specified, the default 'data' is used.<br>
              <br>
             <b>Important:</b> To use a storage, the storage identifier and name
              of the root element must match.<br>
              <br>
              <b>Pattern:</b> ^(\\w{1,64})(?:\\s+(\\w+))?$<br>
              <br>
              <b>Example:</b> WEATHER_STATION / WEATHER_STATION station<br>
            "
          required: true
          schema:
            type: string
            example: WEATHER_STATION station
        - name: xpath
          in: path
          description: "
              XPath axis or function.<br>
              Axes always start with a slash, functions do not.<br>
              This is only for the initial distinction from the expression for the interpreter.<br>
              Functions can then also use axes and axes can then also use functions.
              <dir>Example:</dir>
              <pre>
              count(//sensors/*)<br>
              //sensors/nox/data/record[position()>count(//record)-5]
              </pre>
            "
          required: true
          schema:
            type: string
            example: //sensors/nox/data/record
      responses:
        204:
          description: "TODO:"
        400:
          description: "TODO:"
        404:
          description: "Storage does not exist"
        413:
          description: "TODO:"
        415:
          description: "TODO:"
        422:
          description: "TODO:"
        500:
          description: "
              An unexpected error has occurred.<br>
              The response contains the response header with a unique error number.<br>
              A corresponding entry exists in the logging.
            "
    patch:
      tags:
        - API
      parameters:
        - name: Storage
          in: header
          description: "
              Each storage has an identifier. The Storage Identifier is used as
              the filename of the corresponding XML file and must be specified
              with each request so that the datasource uses the correct storage.
              Optionally, the storage identifier can be followed by the name of
              the root element of the XML file separated by a space.<br>
              If the root element is not specified, the default 'data' is used.<br>
              <br>
             <b>Important:</b> To use a storage, the storage identifier and name
              of the root element must match.<br>
              <br>
              <b>Pattern:</b> ^(\\w{1,64})(?:\\s+(\\w+))?$<br>
              <br>
              <b>Example:</b> WEATHER_STATION / WEATHER_STATION station<br>
            "
          required: true
          schema:
            type: string
            example: WEATHER_STATION station
        - name: xpath
          in: path
          description: "
              XPath axis or function.<br>
              Axes always start with a slash, functions do not.<br>
              This is only for the initial distinction from the expression for the interpreter.<br>
              Functions can then also use axes and axes can then also use functions.
              <dir>Example:</dir>
              <pre>
              count(//sensors/*)<br>
              //sensors/nox/data/record[position()>count(//record)-5]
              </pre>
            "
          required: true
          schema:
            type: string
            example: //sensors/nox/data/record
      responses:
        204:
          description: "TODO:"
        400:
          description: "TODO:"
        404:
          description: "Storage does not exist"
        413:
          description: "TODO:"
        415:
          description: "TODO:"
        422:
          description: "TODO:"
        500:
          description: "
              An unexpected error has occurred.<br>
              The response contains the response header with a unique error number.<br>
              A corresponding entry exists in the logging.
            "
    get:
      tags:
        - API
      parameters:
        - name: Storage
          in: header
          description: "
              Each storage has an identifier. The Storage Identifier is used as
              the filename of the corresponding XML file and must be specified
              with each request so that the datasource uses the correct storage.
              Optionally, the storage identifier can be followed by the name of
              the root element of the XML file separated by a space.<br>
              If the root element is not specified, the default 'data' is used.<br>
              <br>
             <b>Important:</b> To use a storage, the storage identifier and name
              of the root element must match.<br>
              <br>
              <b>Pattern:</b> ^(\\w{1,64})(?:\\s+(\\w+))?$<br>
              <br>
              <b>Example:</b> WEATHER_STATION / WEATHER_STATION station<br>
            "
          required: true
          schema:
            type: string
            example: WEATHER_STATION station
        - name: xpath
          in: path
          description: "
              XPath axis or function.<br>
              Axes always start with a slash, functions do not.<br>
              This is only for the initial distinction from the expression for the interpreter.<br>
              Functions can then also use axes and axes can then also use functions.
              <dir>Example:</dir>
              <pre>
              count(//sensors/*)<br>
              //sensors/nox/data/record[position()>count(//record)-5]
              </pre>
            "
          required: true
          schema:
            type: string
            example: //sensors/nox/data/record
      responses:
        200:
          description: "TODO:"
        204:
          description: "TODO:"
        400:
          description: "TODO:"
        404:
          description: "Storage does not exist"
        500:
          description: "
              An unexpected error has occurred.<br>
              The response contains the response header with a unique error number.<br>
              A corresponding entry exists in the logging.
            "
    post:
      tags:
        - API
      parameters:
        - name: Storage
          in: header
          description: "
              Each storage has an identifier. The Storage Identifier is used as
              the filename of the corresponding XML file and must be specified
              with each request so that the datasource uses the correct storage.
              Optionally, the storage identifier can be followed by the name of
              the root element of the XML file separated by a space.<br>
              If the root element is not specified, the default 'data' is used.<br>
              <br>
             <b>Important:</b> To use a storage, the storage identifier and name
              of the root element must match.<br>
              <br>
              <b>Pattern:</b> ^(\\w{1,64})(?:\\s+(\\w+))?$<br>
              <br>
              <b>Example:</b> WEATHER_STATION / WEATHER_STATION station<br>
            "
          required: true
          schema:
            type: string
            example: WEATHER_STATION station
        - name: xpath
          in: path
          description: "
              XPath axis or function.<br>
              Axes always start with a slash, functions do not.<br>
              This is only for the initial distinction from the expression for the interpreter.<br>
              Functions can then also use axes and axes can then also use functions.
              <dir>Example:</dir>
              <pre>
              count(//sensors/*)<br>
              //sensors/nox/data/record[position()>count(//record)-5]
              </pre>
            "
          required: true
          schema:
            type: string
            example: //sensors/nox/data/record
      responses:
        200:
          description: "TODO:"
        204:
          description: "TODO:"
        400:
          description: "TODO:"
        404:
          description: "Storage does not exist"
        415:
          description: "TODO:"
        422:
          description: "TODO:"
        500:
          description: "
              An unexpected error has occurred.<br>
              The response contains the response header with a unique error number.<br>
              A corresponding entry exists in the logging.
            "
    delete:
      tags:
        - API
      parameters:
        - name: Storage
          in: header
          description: "
              Each storage has an identifier. The Storage Identifier is used as
              the filename of the corresponding XML file and must be specified
              with each request so that the datasource uses the correct storage.
              Optionally, the storage identifier can be followed by the name of
              the root element of the XML file separated by a space.<br>
              If the root element is not specified, the default 'data' is used.<br>
              <br>
             <b>Important:</b> To use a storage, the storage identifier and name
              of the root element must match.<br>
              <br>
              <b>Pattern:</b> ^(\\w{1,64})(?:\\s+(\\w+))?$<br>
              <br>
              <b>Example:</b> WEATHER_STATION / WEATHER_STATION station<br>
            "
          required: true
          schema:
            type: string
            example: WEATHER_STATION station
        - name: xpath
          in: path
          description: "
              XPath axis or function.<br>
              Axes always start with a slash, functions do not.<br>
              This is only for the initial distinction from the expression for the interpreter.<br>
              Functions can then also use axes and axes can then also use functions.
              <dir>Example:</dir>
              <pre>
              count(//sensors/*)<br>
              //sensors/nox/data/record[position()>count(//record)-5]
              </pre>
            "
          required: true
          schema:
            type: string
            example: //sensors/nox/data/record
      responses:
        204:
          description: "TODO:"
        400:
          description: "TODO:"
        404:
          description: "Storage does not exist"
        500:
          description: "
              An unexpected error has occurred.<br>
              The response contains the response header with a unique error number.<br>
              A corresponding entry exists in the logging.
            "
  /xmex!{xpath}!json:
    get:
      tags:
        - API
      parameters:
        - name: Storage
          in: header
          description: "
              Each storage has an identifier. The Storage Identifier is used as
              the filename of the corresponding XML file and must be specified
              with each request so that the datasource uses the correct storage.
              Optionally, the storage identifier can be followed by the name of
              the root element of the XML file separated by a space.<br>
              If the root element is not specified, the default 'data' is used.<br>
              <br>
             <b>Important:</b> To use a storage, the storage identifier and name
              of the root element must match.<br>
              <br>
              <b>Pattern:</b> ^(\\w{1,64})(?:\\s+(\\w+))?$<br>
              <br>
              <b>Example:</b> WEATHER_STATION / WEATHER_STATION station<br>
            "
          required: true
          schema:
            type: string
            example: WEATHER_STATION station
        - name: xpath
          in: path
          description: "
              XPath axis or function.<br>
              Axes always start with a slash, functions do not.<br>
              This is only for the initial distinction from the expression for the interpreter.<br>
              Functions can then also use axes and axes can then also use functions.
              <dir>Example:</dir>
              <pre>
              count(//sensors/*)<br>
              //sensors/nox/data/record[position()>count(//record)-5]
              </pre>
            "
          required: true
          schema:
            type: string
            example: //sensors/nox/data/record
      responses:
        200:
          description: "TODO:"
        204:
          description: "TODO:"
        400:
          description: "TODO:"
        404:
          description: "Storage does not exist"
        500:
          description: "
              An unexpected error has occurred.<br>
              The response contains the response header with a unique error number.<br>
              A corresponding entry exists in the logging.
            "
    post:
      tags:
        - API
      parameters:
        - name: Storage
          in: header
          description: "
              Each storage has an identifier. The Storage Identifier is used as
              the filename of the corresponding XML file and must be specified
              with each request so that the datasource uses the correct storage.
              Optionally, the storage identifier can be followed by the name of
              the root element of the XML file separated by a space.<br>
              If the root element is not specified, the default 'data' is used.<br>
              <br>
             <b>Important:</b> To use a storage, the storage identifier and name
              of the root element must match.<br>
              <br>
              <b>Pattern:</b> ^(\\w{1,64})(?:\\s+(\\w+))?$<br>
              <br>
              <b>Example:</b> WEATHER_STATION / WEATHER_STATION station<br>
            "
          required: true
          schema:
            type: string
            example: WEATHER_STATION station
        - name: xpath
          in: path
          description: "
              XPath axis or function.<br>
              Axes always start with a slash, functions do not.<br>
              This is only for the initial distinction from the expression for the interpreter.<br>
              Functions can then also use axes and axes can then also use functions.
              <dir>Example:</dir>
              <pre>
              count(//sensors/*)<br>
              //sensors/nox/data/record[position()>count(//record)-5]
              </pre>
            "
          required: true
          schema:
            type: string
            example: //sensors/nox/data/record
      responses:
        200:
          description: "TODO:"
        204:
          description: "TODO:"
        400:
          description: "TODO:"
        404:
          description: "Storage does not exist"
        415:
          description: "TODO:"
        422:
          description: "TODO:"
        500:
          description: "
              An unexpected error has occurred.<br>
              The response contains the response header with a unique error number.<br>
              A corresponding entry exists in the logging.
            "
